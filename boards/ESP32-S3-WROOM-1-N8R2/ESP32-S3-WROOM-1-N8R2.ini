; =============================================================================
; Willy ESP32-S3-WROOM-1-N8R2 — Configuração Completa (13 Módulos)
; Macros devem corresponder às esperadas por configPins.h e precompiler_flags.h
; =============================================================================

[env:ESP32-S3-WROOM-1-N8R2]
board = ESP-General
board_build.partitions = custom_8Mb.csv
build_src_filter =${env.build_src_filter} +<../boards/ESP32-S3-WROOM-1-N8R2>
board_build.arduino.memory_type = qio_qspi
build_unflags = -DARDUINO_USB_CDC_ON_BOOT
build_flags =
	${env.build_flags}
	-Iboards/ESP32-S3-WROOM-1-N8R2
	-Wno-narrowing
	-Wno-volatile
	-Wno-discarded-qualifiers
	-DARDUINO_USB_CDC_ON_BOOT=0

	; ═══════════════════════════════════════════════════════════════════
	; LED RGB Built-in (NeoPixel WS2812)
	; ═══════════════════════════════════════════════════════════════════
	-DRGB_LED=48

	; ═══════════════════════════════════════════════════════════════════
	; Barramento I2C (PN532 NFC 0x24, DS3231 RTC 0x68, PAJ7620 0x73)
	; ═══════════════════════════════════════════════════════════════════
	-DGROVE_SDA=8
	-DGROVE_SCL=17

	; ═══════════════════════════════════════════════════════════════════
	; Barramento SPI — Linhas Comuns (TFT, Touch, SD, NRF×2, CC1101)
	; ═══════════════════════════════════════════════════════════════════
	-DSPI_SCK_PIN=12
	-DSPI_MOSI_PIN=11
	-DSPI_MISO_PIN=13
	-DSPI_SS_PIN=10

	; ═══════════════════════════════════════════════════════════════════
	; Display TFT ILI9341 2.4" (320×240, SPI)
	; ═══════════════════════════════════════════════════════════════════
	-DHAS_SCREEN=1
	-DUSER_SETUP_LOADED=1
	-DILI9341_DRIVER=1
	-DTFT_WIDTH=240
	-DTFT_HEIGHT=320
	-DROTATION=1
	-DBACKLIGHT=3
	-DMINBRIGHT=160
	-DTFT_DISPON=0x29
	-DTFT_DISPOFF=0x28
	-DTFT_CS=10
	-DTFT_DC=9
	-DTFT_RST=14
	-DTFT_MOSI=11
	-DTFT_MISO=13
	-DTFT_SCLK=12
	-DTFT_BL=3
	-DTFT_BACKLIGHT_ON=HIGH
	-DSMOOTH_FONT=1
	-DSPI_FREQUENCY=20000000
	-DSPI_READ_FREQUENCY=10000000

	; ═══════════════════════════════════════════════════════════════════
	; Touch XPT2046 (SPI Compartilhado)
	; ═══════════════════════════════════════════════════════════════════
	-DHAS_TOUCH=1
	-DTOUCH_CS=15
	-DTOUCH_IRQ=36
	-DSPI_TOUCH_FREQUENCY=2500000

	; ═══════════════════════════════════════════════════════════════════
	; Cartão Micro SD (SPI Compartilhado)
	; ═══════════════════════════════════════════════════════════════════
	-DSDCARD_CS=38
	-DSDCARD_SCK=12
	-DSDCARD_MISO=13
	-DSDCARD_MOSI=11

	; ═══════════════════════════════════════════════════════════════════
	; NRF24L01+PA+LNA #1 (configPins.h usa NRF24_SCK_PIN etc.)
	; ═══════════════════════════════════════════════════════════════════
	-DNRF24_SCK_PIN=12
	-DNRF24_MISO_PIN=13
	-DNRF24_MOSI_PIN=11
	-DNRF24_SS_PIN=16
	-DNRF24_CE_PIN=21
	-DNRF24_CS_PIN=16

	; ═══════════════════════════════════════════════════════════════════
	; NRF24L01+PA+LNA #2 (pinos extras para segundo módulo)
	; ═══════════════════════════════════════════════════════════════════
	-DNRF24_CS2_PIN=35
	-DNRF24_CE2_PIN=37

	; ═══════════════════════════════════════════════════════════════════
	; CC1101 Sub-GHz 433MHz (configPins.h usa CC1101_SCK_PIN etc.)
	; ═══════════════════════════════════════════════════════════════════
	-DCC1101_SCK_PIN=12
	-DCC1101_MISO_PIN=13
	-DCC1101_MOSI_PIN=11
	-DCC1101_SS_PIN=18
	-DCC1101_GDO0_PIN=33
	-DCC1101_GDO2_PIN=34
	-DCC1101_CS_PIN=18
	-DCC1101_GDO0=33
	-DCC1101_GDO2=34

	; ═══════════════════════════════════════════════════════════════════
	; GPS NEO-6M (UART1) — precompiler_flags.h usa GPS_SERIAL_TX/RX
	; ═══════════════════════════════════════════════════════════════════
	-DGPS_SERIAL_TX=40
	-DGPS_SERIAL_RX=39
	-DGPS_BAUD=9600

	; ═══════════════════════════════════════════════════════════════════
	; IR — TX/RX LEDs (precompiler_flags.h usa TXLED / RXLED)
	; YS-IRTM IR Serial TX=1, RX=47
	; ═══════════════════════════════════════════════════════════════════
	-DTXLED=1
	-DRXLED=47
	-DLED_ON=HIGH
	-DLED_OFF=LOW
	-DIR_TX_PINS='{{"IR TX", 1}, {"Grove W", GROVE_SCL}, {"Grove Y", GROVE_SDA}}'
	-DIR_RX_PINS='{{"IR RX", 47}, {"Grove W", GROVE_SCL}, {"Grove Y", GROVE_SDA}}'

	; ═══════════════════════════════════════════════════════════════════
	; RF TX/RX Pins (CC1101 / rc-switch)
	; ═══════════════════════════════════════════════════════════════════
	-DRF_TX_PINS='{{"M5 RF433T", GROVE_SDA}, {"Grove W", GROVE_SCL}, {"Grove Y", GROVE_SDA}}'
	-DRF_RX_PINS='{{"M5 RF433R", GROVE_SCL}, {"Grove W", GROVE_SCL}, {"Grove Y", GROVE_SDA}}'

	; ═══════════════════════════════════════════════════════════════════
	; INMP441 Microfone I2S
	; ═══════════════════════════════════════════════════════════════════
	-DI2S_SCK_PIN=41
	-DI2S_WS_PIN=42
	-DI2S_SD_PIN=2

	; ═══════════════════════════════════════════════════════════════════
	; Joystick KY-023 (Analógico)
	; ═══════════════════════════════════════════════════════════════════
	-DJOY_X_PIN=4
	-DJOY_Y_PIN=5
	-DJOY_BTN_PIN=6

	; ═══════════════════════════════════════════════════════════════════
	; Botões / UI
	; ═══════════════════════════════════════════════════════════════════
	-DFP=1
	-DFM=2
	-DFG=3
	-DBTN_ALIAS='"OK"'

	; ═══════════════════════════════════════════════════════════════════
	; Nome do Dispositivo
	; ═══════════════════════════════════════════════════════════════════
	-DDEVICE_NAME='"ESP32-S3 WROOM-1 N8R2 (Willy)"'

lib_deps =
	${env.lib_deps}
	adafruit/RTClib@^2.1.4

monitor_port = COM6
monitor_speed = 115200
monitor_filters = esp32_exception_decoder, time, colorize
monitor_dtr = 0
monitor_rts = 0
